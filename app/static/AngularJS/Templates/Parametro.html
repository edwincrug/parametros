<div cg-busy="myPromise" ng-init="init()">
	<div id="contenedor">
		<h1>Administración de Catálogos</h1>
		<tabset>
			<tab select="alertMe()" heading="Escalamiento">
				<button class="btn btn-default" type="button" id="btnNuevo">Nuevo</button>
				<table class="table table-condensed"> 
					<thead> 
						<tr> 
							<th>Proceso</th> 
							<th>Nodo</th> 
							<th>Empresa</th> 
							<th>Sucursal</th> 
							<th>Departamento</th> 
							<th>Tipo</th> 
							<th>Autorizadores</th> 
							<th>Acción</th> 
						</tr> 
					</thead> 
					<tbody> 
						<tr ng-repeat="escalamiento in listaEscalamiento"> 
							<td >{{ escalamiento.procNombre }}</td> 
							<td >{{ escalamiento.nodoNombre }}</td> 
							<td >{{ escalamiento.empNombre }}</td> 
							<td >{{ escalamiento.sucNombre }}</td> 
							<td >{{ escalamiento.depNombre }}</td> 
							<td >{{ escalamiento.tipOrden }}</td> 
							<td >
								<button class="btn btn-primary" type="button" id="btnNuevo">
									<span class="glyphicon glyphicon-user" aria-hidden="true" ng-click="MostrarUsuarios(escalamiento)"></span>
								</button>
							</td> 
							<td >
								<button class="btn btn-info" type="button" id="btnEditar">
									<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
								</button>
							</td> 
						</tr> 
					</tbody> 
				</table>
			</tab>
			<tab select="alertMe()" heading="Mancomunado">				
				<button class="btn btn-default" type="button" id="btnNuevo" aria-hidden="true" ng-click="MostrarNuevoMancomunado()">Nuevo</button>
				<table class="table table-condensed"> 
					<thead> 
						<tr> 
							<th>Proceso</th> 
							<th>Nodo</th> 
							<th>Empresa</th> 
							<th>Sucursal</th> 
							<th>Departamento</th> 
							<th>Tipo</th> 
							<th>Mancomunado</th>
							<th>Editar</th>
							<th>Eliminar</th>
						</tr> 
					</thead> 
					<tbody> 
						<tr ng-repeat="mancomunado in listaMancomunados"> 
							<td >{{ mancomunado.procNombre }}</td> 
							<td >{{ mancomunado.nodoNombre }}</td> 
							<td >{{ mancomunado.empNombre }}</td> 
							<td >{{ mancomunado.sucNombre }}</td> 
							<td >{{ mancomunado.depNombre }}</td> 
							<td >{{ mancomunado.tipOrden }}</td> 
							<td >{{ mancomunado.usuarioMancomunadoC }}</td> 
							<td >
								<button class="btn btn-primary" type="button" id="btnUpdate">
									<span class="glyphicon glyphicon-pencil" aria-hidden="true" ng-click="MostrarUsuarios(mancomunado)"></span>
								</button>								
							</td>		
							<td>
								<button class="btn btn-danger" type="button" id="btnDelete">
									<span class="glyphicon glyphicon-remove" aria-hidden="true" ng-click="DelMancomunado(mancomunado)"></span>
								</button>
							</td>					
						</tr> 
					</tbody> 
				</table>
			</tab>
		</tabset>
	</div>
</div>

<div class="modal fade" tabindex="-1" id="viewAprobadores">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Aprobadores</h4>
      </div>
      <div class="modal-body">
        <table class="table table-condensed" id="tblAprobadores"> 
					<thead> 
						<tr> 
							<th>Nivel</th> 
							<th>Aprobador 1</th> 
							<th>Aprobador 2</th> 
							<th>Aprobador 3</th> 
							<th tooltip="Minutos para escalar">Minutos</th>
						</tr> 
					</thead> 
					<tbody>                                                                                      
						<tr ng-repeat="aprobador in listaAprobadores"> 
							<td >{{ aprobador.nivel }}</td> 
							<td >{{ aprobador.usuarioAutoriza1 }}</td> 
							<td >{{ aprobador.usuarioAutoriza2 }}</td> 
							<td >{{ aprobador.usuarioAutoriza3 }}</td> 
							<td >{{ aprobador.minutos }}</td> 
						</tr> 
					</tbody> 
				</table>
      </div>                                                                                 
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" id="viewUpdMancomunado">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Usuario Mancomunado</h4>
      </div>
      <div class="modal-body">
      	<form>
		  <div class="form-group">
		    <label for="TipoProceso">Tipo Proceso</label>
		    <div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownProceso" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    {{ currentTipoProceso.nombre }}<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownProceso">
			    <li ng-repeat="tipo in listaTipoProceso"><a ng-click="SetTipoProceso(tipo)">{{ tipo.nombre }}</a></li>
			  </ul>
			</div>
		  </div>
		  <div class="form-group">
		    <label for="Empresa">Empresa</label>
		    <div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownEmpresa" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    {{ currentEmpresa.nombre }}<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownEmpresa">
			    <li ng-repeat="tipo in listaEmpresas"><a ng-click="SetEmpresa(tipo)">{{ tipo.nombre }}</a></li>
			  </ul>
			</div>
		  </div>
		  <div class="form-group">
		    <label for="Sucursal">Sucursal</label>
		    <div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownSucursal" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    {{ currentSucursal.nombre }}<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownSucursal">
			    <li ng-repeat="tipo in listaSucursales"><a ng-click="SetSucursal(tipo)">{{ tipo.nombre }}</a></li>
			  </ul>
			</div>
		  </div>
		  <div class="form-group">
		    <label for="Departamento">Departamento</label>
		    <div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownDepartamento" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    {{ currentDepto.nombre }}<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownDepartamento">
			    <li ng-repeat="tipo in listaDeptos"><a ng-click="SetDepto(tipo)">{{ tipo.nombre }}</a></li>
			  </ul>
			</div>
		  </div>
		  <div class="form-group">
		    <label for="TipoOrden">Tipo Orden</label>
		    <div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownTipoOrden" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    {{ currentTipoOrden.nombre }}<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownTipoOrden">
			    <li ng-repeat="tipo in listaTipoOrden"><a ng-click="SetTipoOrden(tipo)">{{ tipo.nombre }}</a></li>
			  </ul>
			</div>
		  </div>
		  <div class="row">
		  <div class="col-lg-4">
		    <div class="input-group">
		      <span class="input-group-btn">
		      </span>
		      <label for="TipoOrden">Usuario Mancomunado</label>
		    </div><!-- /input-group -->
		  </div><!-- /.col-lg-6 -->
		  <div class="col-lg-6">
		    <div class="input-group">
		      <input type="text" class="form-control" readonly>{{ currentUSuario }}
		      <span class="input-group-btn">
		        <button class="btn btn-default" type="button" ng-click="MostrarListaUsuarios()">Buscar</button>
		      </span>
		    </div><!-- /input-group -->
		  </div><!-- /.col-lg-6 -->
		</div><!-- /.row -->
		</form> 		
      	<div class="modal-footer">
      	<button type="button" class="btn btn-default" ng-click="UpdMancomunado()">Actualizar</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" id="viewUsuarios">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Usuarios</h4>
      </div>
      <div class="modal-body">
      	<form>
      		<label>Usuario: <input ng-model="buscarText"></label>
      		<table class="table table-condensed"> 
					<thead> 
						<tr> 
							<th>Id Usuario</th> 
							<th>Nombre</th> 
							<th>Apellido Paterno</th> 
							<th>Apellido Materno</th> 
						</tr> 
					</thead> 
					<tbody> 
						<tr ng-repeat="usuarios in usuarios | filter:buscarText"> 
							<td >{{ usuarios.idUsuario }}</td> 
							<td >{{ usuarios.nombre }}</td> 
							<td >{{ usuarios.aPaterno }}</td> 
							<td >{{ usuarios.aMaterno }}</td> 
						</tr> 
						<td >
							<button class="btn btn-primary" type="button" id="btnSeleccionar">
								<span class="glyphicon glyphicon-ok" aria-hidden="true" ng-click="SetUsuario(usuarios)"></span>
							</button>
						</td>
					</tbody> 
				</table>
		</form>     
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" id="viewNewMancomunado">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Nuevo Usuario Mancomunado</h4>
      </div>
      <div class="modal-body">
      	<form>
		  <div class="form-group">
		    <label for="TipoProceso">Tipo Proceso</label>
		    <div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownProceso" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    {{ currentTipoProceso.nombre }}<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownProceso">
			    <li ng-repeat="tipo in listaTipoProceso"><a ng-click="SetTipoProceso(tipo)">{{ tipo.nombre }}</a></li>
			  </ul>
			</div>
		  </div>
		  <div class="form-group">
		    <label for="Empresa">Empresa</label>
		    <div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownEmpresa" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    {{ currentEmpresa.nombre }}<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownEmpresa">
			    <li ng-repeat="tipo in listaEmpresas"><a ng-click="SetEmpresa(tipo)">{{ tipo.nombre }}</a></li>
			  </ul>
			</div>
		  </div>
		  <div class="form-group">
		    <label for="Sucursal">Sucursal</label>
		    <div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownSucursal" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    {{ currentSucursal.nombre }}<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownSucursal">
			    <li ng-repeat="tipo in listaSucursales"><a ng-click="SetSucursal(tipo)">{{ tipo.nombre }}</a></li>
			  </ul>
			</div>
		  </div>
		  <div class="form-group">
		    <label for="Departamento">Departamento</label>
		    <div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownDepartamento" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    {{ currentDepto.nombre }}<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownDepartamento">
			    <li ng-repeat="tipo in listaDeptos"><a ng-click="SetDepto(tipo)">{{ tipo.nombre }}</a></li>
			  </ul>
			</div>
		  </div>
		  <div class="form-group">
		    <label for="TipoOrden">Tipo Orden</label>
		    <div class="dropdown">
			  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownTipoOrden" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    {{ currentTipoOrden.nombre }}<span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" aria-labelledby="dropdownTipoOrden">
			    <li ng-repeat="tipo in listaTipoOrden"><a ng-click="SetTipoOrden(tipo)">{{ tipo.nombre }}</a></li>
			  </ul>
			</div>
		  </div>		  
		<div class="row">
		  <div class="col-lg-4">
		    <div class="input-group">
		      <span class="input-group-btn">
		      </span>
		      <label for="TipoOrden">Usuario Mancomunado</label>
		    </div><!-- /input-group -->
		  </div><!-- /.col-lg-6 -->
		  <div class="col-lg-6">
		    <div class="input-group">
		      <input type="text" class="form-control" readonly>
		      <span class="input-group-btn">
		        <button class="btn btn-default" type="button" ng-click="MostrarListaUsuarios()">Buscar</button>
		      </span>
		    </div><!-- /input-group -->
		  </div><!-- /.col-lg-6 -->
		</div><!-- /.row -->
		</form>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
